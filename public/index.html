<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home | Kalai's Website</title>
    <link rel="icon" href="images/TabLogo.jpeg" type="image/x-icon">
    <link rel="stylesheet" href="styles.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- Include jQuery -->
    <script>
        $(document).ready(function () {
            // Function to fetch messages and append them to chat-messages div
            function fetchMessages() {
                $.get('/get-messages', function (messages) {
                    $('#chat-messages').empty(); // Clear previous messages
                    messages.forEach(function (message) {
                        $('#chat-messages').append('<div class="message">' + message.content + '</div>');
                    });
                });
            }

            // Call fetchMessages function when the page loads
            fetchMessages();

            // Function to send message
            function sendMessage() {
                var message = $('#user-input').val();
                $.post('/store-message', { message: message }, function () {
                    fetchMessages(); // After sending message, fetch and display updated messages
                    $('#send-feedback').text('Message sent successfully!'); // Update send feedback message
                    $('#green-banner').fadeIn(); // Show green banner
                    setTimeout(function () {
                        $('#send-feedback').text(''); // Clear send feedback message after a delay
                        $('#green-banner').fadeOut(); // Hide green banner after a delay
                    }, 3000); // Adjust the delay (in milliseconds) as needed
                });
                $('#user-input').val(''); // Clear input field after sending
            }

            // Click event listener for send button
            $('#send-btn').click(function (event) {
                event.preventDefault(); // Prevent the default form submission behavior
                sendMessage(); // Call sendMessage function
            });

            // Keypress event listener for input field
            $('#user-input').keypress(function (event) {
                if (event.which == 13) { // Enter key pressed
                    event.preventDefault(); // Prevent the default form submission behavior
                    sendMessage(); // Call sendMessage function
                }
            });
        });
    </script>
</head>

<body>
    <header>
        <div class="container">
            <img src="images/apple.avif" alt="Your Logo" class="logo">
            <h1>Kalai's Website</h1>
            <nav>
                <ul>
                    <li class="selected"><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="contact.html">Contact</a></li>

                    <!-- <span class="icon"><i class="fas fa-bell"></i></span>
                    <span class="text">Kalai's Inbox</span>
                    <span class="notification-count">3</span> -->

                    <!-- <li class="button-li">
                        <a href="tel:9342424899">
                            <span class="phone-number">+91-9342424899</span>
                        </a>
                    </li> -->
                </ul>
            </nav>
        </div>
    </header>

    <section class="background">
        <div class="container">
            <div class="chat-container">
                <div id="chat-messages"></div> <!-- This div will display chat messages -->
                <input type="text" id="user-input" placeholder="Type your message...">
                <!-- Input field for user's message -->
                <button id="send-btn">Send</button> <!-- Button to send the message -->
                <script>
                    document.getElementById("send-btn").addEventListener("click", function(event) {
                        event.preventDefault(); // Prevents form from submitting normally
                        
                        var message = document.getElementById("user-input").value.trim(); // Get message input
                        var phoneNumber = "919342424899"; // Replace with your WhatsApp number (including country code)
                        
                        if (message) {
                            var whatsappURL = "https://wa.me/" + phoneNumber + "?text=" + encodeURIComponent(message);
                            window.open(whatsappURL, "_blank"); // Opens WhatsApp in a new tab
                        } else {
                            alert("Please enter a message before sending!"); // Alert if no message entered
                        }
                        
                        document.getElementById("user-input").value = ""; // Clear input after sending
                    });
                </script>
                
                <div id="send-feedback" class="send-feedback"></div>
                <!-- Element to display feedback after sending a message -->
            </div>
        </div>
        <!-- <div id="green-banner" class="green-banner" style="display:none;">Message sent successfully!</div> Green banner element for displaying success message -->
        <li><a href="car.html">Dream Car</a></li>
        <!-- <li><a href="messages.html">Kalai's Inbox</a></li>
        <li><a href="test.html">test site</a></li>
        <li><a href="KalaiPortfolio.html">Kalaiyarasan Portfolio</a></li> -->


        




    </section>


    <section id="social-media" class="section">
        <!-- <h2>Contact Us</h2> -->
        <!-- <p><strong>Address:</strong> Harur, Dharmapuri, TamilNadu 636903</p>
        <p><strong>Phone:</strong> +91-9342424899</p>
        <p><strong>Email:</strong> kalaimail6@gmail.com</p> -->
        <div class="button-container">
            <a href="https://medium.com/@kalaiyarasan61097">
                <img src="images/Blog_pic-1030x584.png" class="button" alt="Blog" width="45" height="25">
            </a>
            <a href="https://github.com/kalaiyarasanperumal">
                <img src="images/imageGitHub.png" class="button" alt="github" width="45" height="25">
            </a>
            <a href="https://www.linkedin.com/in/kalaiyarasan-perumal-9aba40279/">
                <img src="images/linkinedin.png" class="button" alt="LinkedIn" width="45" height="25">
            </a>
            <a href="https://wa.me/9342424899">
                <img src="images/WhatsApp.svg.webp" alt="WhatsApp" class="button" width="45" height="25">
            </a>
        </div>
    </section>









    <footer>
        <div class="container">
            <p>&copy; Copyright ©️ 2024 | Kalaiyarsan Perumal. All Rights Reserved..</p>
        </div>
    </footer>
</body>

</html>